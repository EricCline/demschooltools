@(p : Person, history : PersonHistory)

@import helper._

<h3>@p.getDisplayName()'s JC history</h3>

<table class="table sortable">
<thead><tr><th width=50%>Rule<th width=25%>Most Recent Violation<th># of violations</tr></thead>
<tbody>
@for( r <- history.rule_records ) {
	<tr><td width=50%>@if(r.rule != null) { @r.rule.title } else { <i>unknown</i> }
		<td>
		@if( r.most_recent_charge != null ) {
			@Application.formatDateShort(r.most_recent_charge)
		}
		<td align=right>@r.count</tr>
}
</tbody>
</table>

<h4>Detailed Charges</h4>
@for( c <- p.charges ) {
	<p><b>@c.the_case.case_number</b>.

	Findings: @c.the_case.findings.
	@if( c.rule != null ) {
		<b>@c.rule.title</b>.
	}

	@if( !c.plea.equals("Guilty") ) {
		Plead <b>@c.plea</b>.
	}
}

